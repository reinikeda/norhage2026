/* =========================================================
   PRODUCT LABELS — Norhage 2026
   SALE ribbon (top-left, flush to image)
   NEW burst (top-right, can hang outside)
   Low-stock pill (bottom-left)
   Inline "New Product" text (single product)
   ========================================================= */

/* ---------- Brand palette ---------- */
:root{
  --nh-forest:  #1E3932;
  --nh-green:   #00704A;
  --nh-mint:    #2EA26F;
  --nh-gold:    #C89F63;
  --nh-brown:   #5A3E2B;
  --nh-sale:    #C93C3C;   /* SALE ribbon red */
  --nh-new:     #37B87C;   /* brighter NEW burst */

  /* WHITE polygon (white = visible) for the burst mask */
  --nh-burst-mask: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpolygon fill='%23fff' points='50,2 58,12 72,6 76,20 90,18 88,32 100,40 90,50 100,60 88,68 90,82 76,80 72,94 58,88 50,98 42,88 28,94 24,80 10,82 12,68 2,60 10,50 2,40 12,32 10,18 24,20 28,6 42,12'/%3E%3C/svg%3E");
}

/* Optional dark palette overrides */
body.dark-mode{
  --nh-forest:   #0F2019;
  --nh-new:      #2FC07E;
}

/* ---------- Base card & wrappers ---------- */
.woocommerce ul.products li.product{ position:relative; overflow:visible; z-index:0; }
.woocommerce ul.products li.product .astra-shop-thumbnail-wrap{ position:relative; overflow:visible !important; }
.single-product .woocommerce-product-gallery,
.woocommerce div.product div.images .woocommerce-product-gallery{ position:relative; }

/* Labels layers */
.woocommerce .nhg-labels.nhg-labels--loop,
.single-product .nhg-labels.nhg-labels--single{
  position:absolute; inset:0; pointer-events:none; overflow:visible !important; z-index:30;
}
/* Sale container inside the thumbnail link (flush to image) */
.woocommerce .nhg-labels.nhg-labels--thumb{
  position:absolute; inset:0; pointer-events:none; z-index:31;
}

/* =========================================================
   BADGES
   ========================================================= */

/* Base (used by NEW burst; SALE overrides completely) */
.nhg-badge{
  position:absolute; top:-8px;
  width:56px; height:56px;
  display:grid; place-items:center;
  font:800 10px/1.1 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  text-transform:uppercase; letter-spacing:.03em;
  color:#fff; pointer-events:none;
  border-radius:999px; /* fallback if mask unsupported */
  filter: drop-shadow(0 0 0 2px #fff) drop-shadow(0 6px 16px rgba(0,0,0,.15));
}
.nhg-badge--new{ right:-8px; left:auto; }  /* top-right */
.nhg-badge--sale{ left:0; right:auto; top:0; } /* top-left */

/* ---------- NEW (burst) ---------- */
.nhg-badge--new{
  background-color: var(--nh-new, #37B87C); /* fallback */
  background-color: color-mix(in srgb, var(--nh-green) 60%, white 40%);
  -webkit-mask-image: var(--nh-burst-mask);        mask-image: var(--nh-burst-mask);
  -webkit-mask-repeat:no-repeat;                   mask-repeat:no-repeat;
  -webkit-mask-position:center;                    mask-position:center;
  -webkit-mask-size:contain;                       mask-size:contain;
  -webkit-mask-mode:alpha;                         mask-mode:alpha;
}
.nhg-badge--new::after{
  content: attr(data-text);
  position:relative; z-index:2; text-align:center; color:#fff;
}

/* ---------- SALE (corner ribbon, flush, two lines) ---------- */
.nhg-badge--sale{
  width:68px; height:68px; background:transparent; -webkit-mask:none; mask:none; filter:none; z-index:32;
}
/* corner triangle fills the corner exactly */
.nhg-badge--sale::before{
  content:""; position:absolute; top:0; left:0;
  border-top:68px solid var(--nh-sale, #C93C3C);
  border-right:68px solid transparent;
  box-shadow:0 4px 10px rgba(0,0,0,.12);
}
/* "Sale" + "7–11%" on two lines, centered along diagonal */
.nhg-badge--sale::after{
  content: attr(data-l1) "\A" attr(data-l2);
  white-space: pre;
  position:absolute; top:22px; left:5px;
  transform: rotate(-45deg); transform-origin: top left;
  color:#fff; font-weight:700; text-transform:uppercase;
  line-height:1.05; font-size:10.5px; letter-spacing:.3px; text-align:center;
}

/* ---------- Responsive tweaks ---------- */
@media (max-width:480px){
  .nhg-badge{ width:50px; height:50px; top:-6px; }
  .nhg-badge--new{ right:-6px; }
  .nhg-badge--sale{ width:58px; height:58px; }
  .nhg-badge--sale::before{ border-top-width:58px; border-right-width:58px; }
  .nhg-badge--sale::after{ top:19px; left:4px; font-size:9.8px; }
}

/* =========================================================
   SINGLE PRODUCT — inline "NEW PRODUCT" label
   ========================================================= */
.nhg-new-inline{
  display:inline-flex; align-items:center; gap:8px;
  margin:.25rem 0 .5rem; font-weight:700; font-size:.95rem;
  letter-spacing:.04em; text-transform:uppercase; color:var(--nh-forest,#1E3932);
}
.nhg-new-inline .nhg-new-icon{
  width:18px; height:18px; flex:0 0 18px;
  filter: invert(12%) sepia(20%) saturate(900%) hue-rotate(115deg) brightness(90%) contrast(92%);
  opacity:.95; transform: translateY(1px);
}

/* =========================================================
   LOW STOCK (bottom-left pill)
   ========================================================= */
.nhg-low-stock-banner{
  position:absolute; left:8px; bottom:8px;
  padding:6px 12px; border-radius:18px;
  font:700 11.5px/1 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  text-transform:uppercase; letter-spacing:.35px; pointer-events:none;
  background-color: color-mix(in srgb, var(--nh-gold,#C89F63), transparent 78%);
  color: var(--nh-brown,#5A3E2B);
  border:1.5px solid color-mix(in srgb, var(--nh-gold,#C89F63), #fff 55%);
  backdrop-filter: blur(2px);
}

/* Dark mode – stronger contrast for pill */
body.dark-mode .nhg-low-stock-banner{
  background-color: color-mix(in srgb, var(--nh-gold,#C89F63) 26%, transparent);
  color: #5A3E2B; /* warm light text for contrast */
  border-color: color-mix(in srgb, var(--nh-gold,#C89F63) 70%, #fff 10%);
}

/* =========================================================
   Dark mode refinements for badges
   ========================================================= */
body.dark-mode .nhg-badge{
  filter: drop-shadow(0 0 0 1px rgba(255,255,255,.6)) drop-shadow(0 8px 18px rgba(0,0,0,.35));
}
body.dark-mode .nhg-badge--sale::before{
  box-shadow: 0 6px 16px rgba(0,0,0,.35);
}
body.dark-mode .nhg-new-inline{ color:#E9F1EC; }
